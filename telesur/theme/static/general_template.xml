<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xi="http://www.w3.org/2001/XInclude">


    <rules if-content="//*[@class='template-login_form'] |
                       //*[@class='template-folder_listing'] | 
                       //*[@class='template-overview-controlpanel'] | 
                       //*[@class='template-edit'] | 
                       //*[@class='template-atct_edit'] | 
                       //*[@class='portaltype-folder'] | 
                       //*[@class='portaltype-plone-site'] | 
                       //*[@class='template-mapa'] | 
                       //*[@class='portaltype-topic'] | 
                       //*[contains(@class,'template-collective.polls.poll')] | 
                       //*[contains(@class,'template-collective.nitf.content')] | 
                       //*[contains(@class,'template-telesur.contenttypes.program')] | 
                       //*[contains(@class,'template-telesur.contenttypes.edition')] | 
                       //*[@class='portaltype-telesur-contenttypes-program'] | 
                       //*[@class='portaltype-telesur-contenttypes-edition'] | 
                       //*[@class='template-manage-portlets'] | 
                       //*[@class='portaltype-document']">
        <theme href="general.html" />

        <drop css:content="#viewlet-above-content"/>
        <drop css:content="#content .documentActions"/>

        <rules css:if-content="body:not(.template-manage-portlets)">
          <replace
            css:theme-children=".no-columns .content-placeholder"
            css:content-children="#portal-column-content" />

          <!-- if we are in programas -->
          <rules css:if-content=".portaltype-telesur-contenttypes-program">
            <!-- quitamos todos los elementos de la UI que no queremos -->
            <drop css:theme=".has-column"/>
            <drop css:theme=".edit-bar-wrapper"/>
            <drop css:content="#content .documentFirstHeading"/>
            <drop css:content="#content .documentDescription"/>
          </rules>
        </rules>
        <rules css:if-content=".template-manage-portlets">
          <replace
            css:theme-children=".no-columns .content-placeholder"
            css:content-children="#portal-columns" />
        </rules>
        
        <!-- IF we are in the edit view of nitf -->
        <rules css:if-content="body[class*='template-collective.nitf.content']">
          <after css:theme="#footer-wrapper">
            <script src="++theme++telesur.theme/character-counter.js" type="text/javascript"></script>
          </after>
        </rules>     
        
    </rules>

</rules>
